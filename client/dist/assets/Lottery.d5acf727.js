var S=Object.defineProperty,z=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var N=(s,a,r)=>a in s?S(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r,w=(s,a)=>{for(var r in a||(a={}))W.call(a,r)&&N(s,r,a[r]);if(f)for(var r of f(a))I.call(a,r)&&N(s,r,a[r]);return s},v=(s,a)=>z(s,A(a));import{r as n,a as t,m as o,j as e,F as x}from"./vendor.71bb7add.js";import{N as R}from"./Notification.c472b7b3.js";import{C as _,s as $}from"./index.5cb05bba.js";import{A as y}from"./index.esm.ba826541.js";function B(){const{initLottery:s,lotteryManager:a,lotteryEntryFee:r,lotteryPlayers:d,winner:u,lotteryPrice:g,isLotteryInit:m,startLottery:k,lotteryStatus:i,enterLottery:j,endLottery:E,isEther:L,currentAccount:l}=n.exports.useContext(_),[C,F]=n.exports.useState({lotteryTimeRemaining:0,lotteryManager:null,lotteryEntryFee:0,lotteryPlayers:[],lotteryWinner:null,lotteryPrice:0}),[P,T]=n.exports.useState(!1),[b,H]=n.exports.useState(!1);n.exports.useEffect(()=>{l===a.toLowerCase()&&(l||a.toLowerCase()!==null)&&T(!0)});let h="";u!=="0x0000000000000000000000000000000000000000"&&(h=u),console.log("\u{1F480}",m,i,b),n.exports.useEffect(()=>{async function c(){await s(),F(()=>v(w({},C),{lotteryManager:a,lotteryEntryFee:r,lotteryPlayers:d,lotteryPrice:g}))}c()},[]);const p={hidden:{opacity:0,y:300},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:75,delay:.1}}};return t("div",{className:"flex-1 bg-main bg-cover bg-fixed pt-5 pb-8 space-y-8 text-slate-200",children:[t(o.div,{className:"container bg-zinc-900 mx-auto border border-slate-500 p-4 my-4 rounded-lg max-w-lg",variants:p,initial:"hidden",animate:"visible",children:[t("h1",{className:"antialiased font-medium text-2xl tracking-wide",children:["Lottery Game"," ",i=="1"&&e("span",{className:"text-xs p-2 bg-slate-300 shadow-lg shadow-slate-600 rounded-full text-teal-600 antialiased font-bold",children:"Started"}),i=="2"&&e("span",{className:"text-xs p-2 bg-slate-300 shadow-lg shadow-slate-600 rounded-full text-rose-600 antialiased font-bold",children:"Ended"})]}),t("div",{className:"pt-5",children:[t("h3",{className:"pb-2 text-slate-300 antialiased text-md",children:["Total Players :"," ",e("span",{className:"text-teal-400 text-lg",children:d.length})]}),t("h3",{className:"pb-2 text-slate-300 antialiased text-md",children:["Manager : ","",e("span",{className:"text-teal-400",children:e("a",{href:`https://ropsten.etherscan.io/address/${a}`,target:"_blank",rel:"noreferrer",className:"text-sm tracking-wide uppercase text-teal-400",children:a})})]}),t("h3",{className:"pb-2 text-slate-300 antialiased text-md",children:["Entry Fee :"," ",e("span",{className:" text-teal-400 text-md",children:+r/10**18})," ","ETH"]}),t("h3",{className:"pb-2 text-slate-300 antialiased text-md",children:["Winning Price :"," ",e("span",{className:"text-teal-400 text-md",children:g})," ETH"]})]})]}),l?e(o.div,{className:"container mx-auto bg-zinc-900 border border-slate-500 p-5 my-4 rounded-lg max-w-lg",variants:p,initial:"hidden",animate:"visible",children:m?e("div",{className:"container mx-auto",children:P?e(x,{children:e("form",{action:"",children:t("div",{className:"flex justify-center space-x-9",children:[t("h6",{className:"text-xs pt-3 text-teal-500 antialiased tracking-widest uppercase font-semibold",children:[" ",e(y,{className:"inline"})," You are the Lottery Manager"]}),i!="1"?e("button",{type:"button",className:"px-7 py-2 bg-green-400 rounded-lg text-slate-800 hover:shadow-lg hover:shadow-green-600",onClick:()=>{k()},children:"Start"}):e("button",{type:"button",className:"px-7 py-2 bg-red-400 rounded-lg text-slate-800 hover:shadow-lg hover:shadow-red-600",onClick:()=>{E()},children:"End Now"})]})})}):e(x,{children:i=="1"&&!b?t("div",{className:"tracking-wider text-slate-200 justify-evenly",children:[t("h6",{className:"text-xs text-red-500 antialiased tracking-widest uppercase font-semibold",children:[" ",e(y,{className:"inline"})," Only Use Ropsten Test Network"]}),t("h1",{className:"pt-4 text-sm text-slate-400 text-justify",children:[" ","The lottery Manager can start the lottery and it will end after the remaining time has passed."]}),e("div",{className:"pt-5 flex justify-center",children:e("button",{type:"button",className:"px-7 py-2 bg-yellow-400 rounded-lg text-slate-800 hover:shadow-lg hover:shadow-yellow-600",disabled:!m,onClick:()=>{j()},children:"Enter"})})]}):t("div",{className:"tracking-wider text-slate-200 justify-evenly",children:[t("h6",{className:"text-xs text-red-500 antialiased tracking-widest uppercase font-semibold",children:[" ",e(y,{className:"inline"})," Only Use Ropsten Test Network"]}),t("h1",{className:"pt-4 text-sm text-slate-400 text-justify",children:[" ","The lottery Manager will start the lottery soon don't forget to participate to win the prize money."]})]})})}):e("div",{className:"bg-zinc-900 flex-1 items-center py-4 flex justify-center",children:e("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-teal-500"})})}):e(o.div,{className:"container mx-auto bg-zinc-900 border border-slate-500 p-5 my-4 rounded-lg max-w-lg",variants:p,initial:"hidden",animate:"visible",children:e("div",{className:"flex flex-row gap-2 antialiased tracking-wider text-slate-200 justify-evenly",children:"\u26A0\uFE0F Connect your wallet to participate in the lottery"})}),l&&t(x,{children:[d.length>1?t(o.div,{className:"container mx-auto border border-slate-700 text-slate-400 light-gradient p-4 my-4 rounded-lg max-w-lg",initial:{opacity:0},animate:{opacity:1},transition:{duration:2.1},children:[e("h1",{className:"antialiased font-medium text-2xl tracking-wide",children:"Players"}),d.map((c,M)=>e("p",{className:"pt-3 text-teal-400",children:e("a",{href:`https://ropsten.etherscan.io/address/${c}`,target:"_blank",rel:"noreferrer",className:"tracking-wide uppercase text-teal-400 hover:cursor-pointer",children:$(c)})},M))]}):"",i=="2"?t(o.div,{className:"container mx-auto border border-slate-700 text-slate-400 light-gradient p-4 my-4 rounded-lg max-w-lg",initial:{opacity:0},animate:{opacity:1},transition:{duration:2.1},children:[e("h1",{className:"antialiased font-medium text-2xl tracking-wide",children:"Winner"}),e("p",{className:"pt-3 text-teal-400 hover:cursor-pointer",children:e("a",{href:`https://ropsten.etherscan.io/address/${h}`,target:"_blank",rel:"noreferrer",className:"tracking-wide uppercase text-teal-400 hover:cursor-pointer",children:h})})]}):" "]}),e(R,{props:{id:"Lottery",isEther:L,account:l}})]})}export{B as default};
