var S=Object.defineProperty,A=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var w=(r,a,s)=>a in r?S(r,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[a]=s,N=(r,a)=>{for(var s in a||(a={}))z.call(a,s)&&w(r,s,a[s]);if(b)for(var s of b(a))W.call(a,s)&&w(r,s,a[s]);return r},v=(r,a)=>A(r,R(a));import{G,r as l,a as t,m as o,j as e,g as h}from"./vendor.e9de0a5c.js";import{N as H}from"./Notification.3bf0a9e1.js";import{C as _,s as $}from"./index.756fa05a.js";import{A as g}from"./index.esm.d358205b.js";function I(r){return G({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M1.946 9.315c-.522-.174-.527-.455.01-.634l19.087-6.362c.529-.176.832.12.684.638l-5.454 19.086c-.15.529-.455.547-.679.045L12 14l6-8-8 6-8.054-2.685z"}}]}]})(r)}function J(){const{initLottery:r,lotteryManager:a,lotteryEntryFee:s,lotteryPlayers:d,winner:y,lotteryPrice:f,isLoading:c,startLottery:k,lotteryStatus:n,enterLottery:j,lotteryTimeRemaining:O,endLottery:E,isEther:L,currentAccount:i}=l.exports.useContext(_),[F,C]=l.exports.useState({lotteryManager:null,lotteryEntryFee:0,lotteryPlayers:[],lotteryWinner:null,lotteryPrice:0}),[M,T]=l.exports.useState(!1),p=l.exports.useRef();l.exports.useEffect(()=>{i===a.toLowerCase()&&(i||a.toLowerCase()!==null)&&T(!0)});let x="";y!=="0x0000000000000000000000000000000000000000"&&(x=y),console.log("\u{1F480}",c,n),console.log("Status",n),l.exports.useEffect(()=>{async function m(){await r(),C(()=>v(N({},F),{lotteryManager:a,lotteryEntryFee:s,lotteryPlayers:d,lotteryPrice:f}))}m()},[]);const u={hidden:{opacity:0,y:300},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:75,delay:.1}}};return t("div",{className:"flex-1 bg-slate-900 space-y-8 text-slate-200 p-4",children:[t(o.div,{className:"container bg-neutral-900 mx-auto shadow-lg border border-slate-700 my-4 rounded-lg max-w-lg p-4",variants:u,initial:"hidden",animate:"visible",children:[t("h1",{className:"antialiased font-medium text-2xl tracking-wide",children:["Lottery Game"," ",n=="1"&&e("span",{className:"text-xs p-2 bg-slate-600 shadow-md shadow-slate-800 rounded-full text-teal-200 antialiased font-bold",children:"Started"}),n=="2"&&e("span",{className:"text-xs p-2 bg-slate-300 shadow-lg shadow-slate-600 rounded-full text-rose-600 antialiased font-bold",children:"Ended"}),e("span",{className:"text-xs p-2 mx-2 bg-slate-800 shadow-sm shadow-slate-900 rounded-full antialiased font-bold",children:t("a",{href:`https://ropsten.etherscan.io/address/${a}`,target:"_blank",rel:"noreferrer",className:"text-xs tracking-wider uppercase text-teal-400",children:["Manager",e(I,{className:"text-teal-400 inline-block"})]})})]}),t("div",{className:"pt-5",children:[t("h3",{className:"pb-2 text-slate-300 antialiased text-md",children:["Total Players :"," ",e("span",{className:"text-teal-400 text-lg",children:d.length})]}),t("h3",{className:"pb-2 text-slate-300 antialiased text-md",children:["Entry Fee :"," ",e("span",{className:" text-teal-400 text-md",children:+s/10**18})," ","ETH"]}),t("h3",{className:"pb-2 text-slate-300 antialiased text-md",children:["Winning Price :"," ",e("span",{className:"text-teal-400 text-md",children:f})," ETH"]})]})]}),i?e(o.div,{className:"container mx-auto bg-zinc-900 shadow-lg border border-slate-700 p-5 my-4 rounded-lg max-w-lg",variants:u,initial:"hidden",animate:"visible",children:c?e("div",{className:"bg-zinc-900 flex-1 items-center py-4 flex justify-center",children:e("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-teal-500"})}):e("div",{className:"container mx-auto",children:M?e(h,{children:e("form",{action:"",children:t("div",{className:"flex justify-center space-x-9",children:[t("h6",{className:"text-xs pt-3 text-teal-500 antialiased tracking-widest uppercase font-semibold",children:[" ",e(g,{className:"inline"})," You are the Lottery Manager"]}),n!="1"?t(h,{children:[e("input",{ref:p,placeholder:"Enter Time in Minutes",name:"lottery timer",type:"number",min:"1",pattern:"[0-9]",step:"0.0001",className:"my-2 w-full rounded-sm p-2 outline-none bg-transparent text-white border-none text-sm white-glassmorphism"}),e("button",{type:"button",className:"px-7 py-2 bg-green-400 rounded-lg text-slate-800 hover:shadow-lg hover:shadow-green-600",onClick:()=>{c&&Loader,console.log("\u{1F192}\u{1F525}\u{1F49A}",+p.current.value),k(+p.current.value)},children:"Start"})]}):e("button",{type:"button",className:"px-7 py-2 bg-red-400 rounded-lg text-slate-800 hover:shadow-lg hover:shadow-red-600",onClick:()=>{E()},children:"End Now"})]})})}):e(h,{children:n=="1"?t("div",{className:"tracking-wider text-slate-200 justify-evenly",children:[t("h6",{className:"text-xs text-red-500 antialiased tracking-widest uppercase font-semibold",children:[" ",e(g,{className:"inline"})," Only Use Ropsten Test Network"]}),t("h1",{className:"pt-4 text-sm text-slate-400 text-justify",children:[" ","The lottery Manager can start the lottery and it will end after the remaining time has passed."]}),e("div",{className:"pt-5 flex justify-center",children:e("button",{type:"button",className:"px-7 py-2 bg-yellow-400 rounded-lg text-slate-800 hover:shadow-lg hover:shadow-yellow-600",disabled:c,onClick:()=>{j()},children:"Enter"})})]}):t("div",{className:"tracking-wider text-slate-200 justify-evenly",children:[t("h6",{className:"text-xs text-red-500 antialiased tracking-widest uppercase font-semibold",children:[" ",e(g,{className:"inline"})," Only Use Ropsten Test Network"]}),t("h1",{className:"pt-4 text-sm text-slate-400 text-justify",children:[" ","The lottery Manager will start the lottery soon don't forget to participate to win the prize money."]})]})})})}):e(o.div,{className:"container mx-auto bg-neutral-900 shadow-lg border border-slate-700 p-5 my-4 rounded-lg max-w-lg",variants:u,initial:"hidden",animate:"visible",children:e("div",{className:"flex flex-row gap-2 antialiased tracking-wider text-slate-200 justify-evenly",children:"\u26A0\uFE0F Connect your wallet to participate in the lottery"})}),i&&t(h,{children:[d.length>1?t(o.div,{className:"container mx-auto border border-slate-700 text-slate-400 light-gradient p-4 my-4 rounded-lg max-w-lg",initial:{opacity:0},animate:{opacity:1},transition:{duration:2.1},children:[e("h1",{className:"antialiased font-medium text-2xl tracking-wide",children:"Players"}),d.map((m,P)=>e("p",{className:"pt-3 text-teal-400",children:e("a",{href:`https://ropsten.etherscan.io/address/${m}`,target:"_blank",rel:"noreferrer",className:"tracking-wide uppercase text-teal-400 hover:cursor-pointer",children:$(m)})},P))]}):"",n=="2"?t(o.div,{className:"container mx-auto border border-slate-700 text-slate-400 light-gradient p-4 my-4 rounded-lg max-w-lg",initial:{opacity:0},animate:{opacity:1},transition:{duration:2.1},children:[e("h1",{className:"antialiased font-medium text-2xl tracking-wide",children:"Winner"}),e("p",{className:"pt-3 text-teal-400 hover:cursor-pointer",children:e("a",{href:`https://ropsten.etherscan.io/address/${x}`,target:"_blank",rel:"noreferrer",className:"tracking-wide uppercase text-teal-400 hover:cursor-pointer",children:x})})]}):" "]}),e(H,{props:{id:"Lottery",isEther:L,account:i}})]})}export{J as default};
